<!DOCTYPE html>
<html>

<head>
    <meta name="description" content="">
    <meta name="author" content="Nils Rydh">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>compress</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>
</body>
<script src="js/lz-string-1.3.3-min.js"></script>
<script type="text/javascript">
	var list = [];
	var number = 30;
	for (var i = 0; i < number; i++) {
		var rand = Math.floor(Math.random() * 250) 	
		list.push(rand);
	}
	
	list.sort(function(a,b){return a - b});
	console.log(list);
	var last = list[0];

	var miniList = [];
	miniList.push(last);
	for (var i = 1; i < list.length; i++) {
		miniList.push(list[i]-last);
		last = list[i];
	};

	console.log(miniList);
	var string = miniList.toString();
	console.log("Size of sample is: " + string.length);

	var compressed = LZString.compressToBase64(string);
	console.log("Size of compressed sample is: " + compressed.length);
	console.log(encodeURIComponent(compressed));
	
	string = LZString.decompressFromBase64(compressed);
	console.log("Sample is: " + string);

	var origList = [];
	var tmpList = JSON.parse("[" + string + "]");
	var previous = 0;
	for (var i = 0; i < tmpList.length; i++ ){
		if (i === 0) {
			origList[i] = tmpList[i] ;
		} else {
			origList[i] = previous + tmpList[i];
		}
		previous = origList[i];

	}
	console.log(origList);
	console.log(JSON.stringify(list) == JSON.stringify(origList));
</script>

</html>
